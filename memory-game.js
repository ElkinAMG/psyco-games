var symbols=["face-dizzy","face-dizzy","face-grin-hearts","face-grin-hearts","face-kiss-wink-heart","face-kiss-wink-heart","face-grin-tongue-squint","face-grin-tongue-squint","smile","smile","face-angry","face-angry","face-sad-tear","face-sad-tear","face-meh","face-meh"],opened=[],match=0,moves=0,$deck=$(".deck"),$scorePanel=$("#score-panel"),$moveNum=$scorePanel.find(".moves"),$ratingStars=$scorePanel.find("i"),$restart=$scorePanel.find(".restart"),delay=800,gameCardsQTY=symbols.length/2,rank3stars=gameCardsQTY+2,rank2stars=gameCardsQTY+6,rank1stars=gameCardsQTY+10;function shuffle(e){for(var a,t,i=e.length;0!==i;)t=Math.floor(Math.random()*i),a=e[i-=1],e[i]=e[t],e[t]=a;return e}function initGame(){var e=shuffle(symbols);$deck.empty(),match=0,moves=0,$moveNum.html(moves),$ratingStars.removeClass("fa-star-o").addClass("fa-star");for(var a=0;a<e.length;a++)$deck.append($('<li class="card"><i class="fa fa-'+e[a]+'"></i></li>'))}function setRating(e){var a=3;return e>rank3stars&&e<rank2stars?($ratingStars.eq(2).removeClass("fa-star").addClass("fa-star-o"),a=2):e>rank2stars&&e<rank1stars?($ratingStars.eq(1).removeClass("fa-star").addClass("fa-star-o"),a=1):e>rank1stars&&($ratingStars.eq(0).removeClass("fa-star").addClass("fa-star-o"),a=0),{score:a}}function detenerTemporizador(){clearInterval(temporizador)}function endGame(e,a){detenerTemporizador(),Swal.fire({title:"Felicidades! Eres impresionante!",text:"Con "+e+" movimientos y "+a+" Estrellas.",icon:"success"}).then((function(e){e&&(tiempoRestante=40,actualizarTiempo(),initGame())}))}$restart.on("click",(function(){initGame(),tiempoRestante=40,actualizarTiempo()}));var temporizador,tiempoRestante=40;function actualizarTiempo(){$(".seconds").text("Tienes "+tiempoRestante+" segundos")}function iniciarTemporizador(){temporizador=setInterval((function(){tiempoRestante>0?(tiempoRestante--,actualizarTiempo()):(Swal.fire({icon:"error",title:"Oops...",text:"Â¡Tiempo acabado!"}),reiniciarJuego())}),1e3)}function reiniciarJuego(){aciertos=0,tiempoRestante=40,$(".aciertos").text("Aciertos: "+aciertos),iniciarTemporizador(),clearInterval(temporizador),initGame()}var aciertos=0;$deck.on("click",'.card:not(".match, .open")',(function(){if(temporizador||iniciarTemporizador(),$(".show").length>1)return!0;var e=$(this),a=e.find("i").attr("class");if(e.addClass("open show"),opened.push(a),opened.length>1&&(a===opened[0]?($deck.find(".open").addClass("match animated infinite rubberBand"),setTimeout((function(){$deck.find(".match").removeClass("open show animated infinite rubberBand")}),delay),match++,aciertos++,$(".aciertos").text("Aciertos: "+aciertos)):($deck.find(".open").addClass("notmatch animated infinite wobble"),setTimeout((function(){$deck.find(".open").removeClass("animated infinite wobble")}),delay/1.5),setTimeout((function(){$deck.find(".open").removeClass("open show notmatch animated infinite wobble")}),delay)),opened=[],setRating(++moves),$moveNum.html(moves)),gameCardsQTY===match){setRating(moves);var t=setRating(moves).score;setTimeout((function(){endGame(moves,t)}),500)}})),initGame();