"use strict";(self.webpackChunkpsy_minigames=self.webpackChunkpsy_minigames||[]).push([[838],{288:()=>{Array.prototype.last=function(){return this[this.length-1]},Math.sinus=function(t){return Math.sin(t/180*Math.PI)};let t,e,n,i,o="waiting",a=[],r=[],s=[],l=0;const c=375,d=375,w=100,h=10,g=["No lo lograras","Eres insuficiente","Sera imposible para ti","Eres incapaz"];let u;const y=document.getElementById("game");y.width=window.innerWidth,y.height=window.innerHeight;const m=y.getContext("2d"),f=document.getElementById("introduction"),p=document.getElementById("metaCorto"),x=document.getElementById("metaMedio"),E=document.getElementById("metaLargo"),k=document.getElementById("perfect"),v=document.getElementById("restart"),M=document.getElementById("score"),I=document.getElementById("mensaje");let b=new Image;b.src="./assets/escaleras/avatar.png";let F=50,B=50;function H(){o="waiting",t=void 0,i=0,l=0;const c=Math.floor(Math.random()*g.length);u=g[c],f.style.opacity=1,p.style.opacity=1,x.style.opacity=1,E.style.opacity=1,k.style.opacity=0,v.style.display="none",M.innerText=l,I.style.opacity=0,I.innerText="",a=[{x:50,w:50}],T(),T(),T(),T(),r=[{x:a[0].x+a[0].w,length:0,rotation:0}],s=[],L(),L(),L(),L(),L(),L(),L(),L(),L(),L(),e=a[0].x+a[0].w-10,n=-22,W()}function L(){const t=s[s.length-1],e=(t?t.x:0)+30+Math.floor(120*Math.random()),n=["#6D8821","#8FAC34","#98B333"][Math.floor(3*Math.random())];s.push({x:e,color:n})}function T(){const t=a[a.length-1],e=t.x+t.w+40+Math.floor(160*Math.random()),n=20+Math.floor(80*Math.random());a.push({x:e,w:n})}function A(a){if(!t)return t=a,void window.requestAnimationFrame(A);switch(o){case"waiting":return;case"stretching":r.last().length+=(a-t)/4;break;case"turning":if(r.last().rotation+=(a-t)/4,r.last().rotation>90){r.last().rotation=90;const[t,e]=C();t&&(l+=e?2:1,M.innerText=l,e&&(k.style.opacity=1,setTimeout((()=>k.style.opacity=0),1e3)),l%10!=0&&l%11!=0&&l%22!=0&&l%33!=0&&l%44!=0&&l%55!=0&&l%66!=0&&l%77!=0&&l%88!=0&&l%99!=0&&100!==l||confetti({angle:90,spread:120,particleCount:100,colors:["#FF0000","#00FF00","#0000FF"],origin:{x:.5,y:.6}}),T(),L(),L()),o="walking"}break;case"walking":{e+=(a-t)/4;const[n]=C();if(n){const t=n.x+n.w-10;e>t&&(e=t,o="transitioning")}else{const t=r.last().x+r.last().length+17;e>t&&(e=t,o="falling")}break}case"transitioning":{i+=(a-t)/2;const[e]=C();i>e.x+e.w-100&&(r.push({x:e.x+e.w,length:0,rotation:0}),o="waiting");break}case"falling":{r.last().rotation<180&&(r.last().rotation+=(a-t)/4),n+=(a-t)/2;const e=w+100+(window.innerHeight-d)/2;if(n>e)return v.style.display="block",I.style.opacity=1,void(I.innerHTML=u);break}default:throw Error("Wrong phase")}W(),window.requestAnimationFrame(A),t=a}function C(){if(90!=r.last().rotation)throw Error(`Stick is ${r.last().rotation}Â°`);const t=r.last().x+r.last().length,e=a.find((e=>e.x<t&&t<e.x+e.w));return e&&e.x+e.w/2-h/2<t&&t<e.x+e.w/2+h/2?[e,!0]:[e,!1]}function W(){m.save(),m.clearRect(0,0,window.innerWidth,window.innerHeight),m.translate((window.innerWidth-c)/2-i,(window.innerHeight-d)/2),a.forEach((({x:t,w:e})=>{m.fillStyle="black",m.fillRect(t,d-w,e,w+(window.innerHeight-d)/2),r.last().x<t&&(m.fillStyle="red",m.fillRect(t+e/2-h/2,d-w,h,h))})),m.drawImage(b,e-F/2,n+d-w-B/2,F,B),r.forEach((t=>{m.save(),m.translate(t.x,d-w),m.rotate(Math.PI/180*t.rotation),m.beginPath(),m.lineWidth=2,m.moveTo(0,0),m.lineTo(0,-t.length),m.stroke(),m.restore()})),m.restore()}H(),H(),window.addEventListener("keydown",(function(t){if(" "==t.key)return t.preventDefault(),void H()})),window.addEventListener("mousedown",(function(e){"waiting"==o&&(t=void 0,f.style.opacity=0,p.style.opacity=0,x.style.opacity=0,E.style.opacity=0,o="stretching",window.requestAnimationFrame(A))})),window.addEventListener("mouseup",(function(t){"stretching"==o&&(o="turning")})),window.addEventListener("resize",(function(t){y.width=window.innerWidth,y.height=window.innerHeight,W()})),window.requestAnimationFrame(A),v.addEventListener("click",(function(t){t.preventDefault(),H(),v.style.display="none"}))}},t=>{t.O(0,[378],(()=>(288,t(t.s=288)))),t.O()}]);